(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(2),o=t.n(r),u=t(14),a=t.n(u),i=(t(20),t(3)),s=t(4),l=t.n(s),d="/api/persons",f=function(){return l.a.get(d)},m=function(e){return l.a.post(d,e)},h=function(e){return l.a.delete(d+"/".concat(e.id))},j=function(e,n){return l.a.put(d+"/".concat(e.id),n)},b=(t(38),function(e){return Object(c.jsxs)("p",{children:["Filter shown: ",Object(c.jsx)("input",{onChange:e.handleFilterInputChange})]})}),p=function(e){return Object(c.jsxs)("form",{onSubmit:e.addPerson,children:[Object(c.jsxs)("div",{children:[Object(c.jsxs)("p",{children:["Name: ",Object(c.jsx)("input",{value:e.newName,onChange:e.handleNameInputChange})]}),Object(c.jsxs)("p",{children:["Number: ",Object(c.jsx)("input",{value:e.newNumber,onChange:e.handleNumberInputChange})]})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"Add"})})]})},O=function(e){var n=e.persons,t=e.filterName,r=e.deletePerson;return Object(c.jsx)("div",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(c.jsx)("div",{children:Object(c.jsxs)("p",{children:[e.name,": ",e.number," ",Object(c.jsx)("button",{onClick:function(){return r({filteredPerson:e,persons:n})},children:"delete"})]})},e.number)}))})},v=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"success",children:n})},x=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"error",children:n})},g=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],u=Object(r.useState)(""),a=Object(i.a)(u,2),s=a[0],l=a[1],d=Object(r.useState)(""),g=Object(i.a)(d,2),w=g[0],N=g[1],C=Object(r.useState)(""),y=Object(i.a)(C,2),P=y[0],S=y[1],T=Object(r.useState)(null),k=Object(i.a)(T,2),I=k[0],F=k[1],E=Object(r.useState)(null),D=Object(i.a)(E,2),L=D[0],R=D[1];Object(r.useEffect)((function(){f().then((function(e){o(e.data)}))}),[]);var B=function(e){var n=e.filteredPerson,t=e.persons;"undefined"!==typeof n.id?window.confirm("Remove ".concat(n.name," from the phone book?"))&&h(n).then((function(e){o(t.filter((function(e){return e.name!==n.name}))),R("".concat(n.name," was deleted successfully")),setTimeout((function(){R(null)}),5e3)})).catch((function(e){F("Error! ".concat(n.name," has already been removed from the server.")),setTimeout((function(){F(null)}),5e3)})):window.confirm("Remove ".concat(n.name," from the phone book?"))&&(F("".concat(n.name," was not yet added to the server! Refresh the page if you wish to delete the entry")),setTimeout((function(){F(null)}),5e3))};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phone book"}),Object(c.jsx)(v,{message:L}),Object(c.jsx)(x,{message:I}),Object(c.jsx)(b,{handleFilterInputChange:function(e){S(e.target.value)}}),Object(c.jsx)("h2",{children:"New Entry"}),Object(c.jsx)(p,{addPerson:function(e){var n={name:s,number:w};if(t.some((function(e){return e.name===s&&"undefined"!==typeof e.id}))){e.preventDefault();var c=t.find((function(e){return e.name===s}));window.confirm("".concat(s," is already in the phone book. Overwrite?"))?j(c,n).then((function(e){o(t.map((function(e){return e.name===n.name?n:e}))),l(""),N(""),R("".concat(n.name,"'s number updated successfully")),setTimeout((function(){R(null)}),5e3)})).catch((function(e){F("Error! ".concat(n.name," has already been removed from the server.")),setTimeout((function(){F(null)}),5e3)})):(l(""),N(""))}else if(t.some((function(e){return e.name===s}))){e.preventDefault();var r=t.find((function(e){return e.name===s}));F("Please refresh the page to edit ".concat(r.name,"'s number")),setTimeout((function(){F(null)}),5e3)}else e.preventDefault(),m(n).then((function(e){o(t.concat(n)),l(""),N(""),R("".concat(n.name," was added to the phone book")),setTimeout((function(){R(null)}),5e3)}))},deletePerson:B,newName:s,handleNameInputChange:function(e){l(e.target.value)},newNumber:w,handleNumberInputChange:function(e){N(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(O,{persons:t,filterName:P,deletePerson:B})]})},w=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,40)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,o=n.getLCP,u=n.getTTFB;t(e),c(e),r(e),o(e),u(e)}))};a.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(g,{})}),document.getElementById("root")),w()}},[[39,1,2]]]);
//# sourceMappingURL=main.77ca7f29.chunk.js.map